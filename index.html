<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Adonix Files</title>
  <style>
    body { background: #1e1e1e; color: #fff; font-family: Arial, sans-serif; text-align: center; padding: 20px; }
    h1 { margin-bottom: 5px; }
    p { color: #aaa; }
    #drop-area { border: 2px dashed #666; border-radius: 10px; padding: 30px; margin: 20px auto; width: 95%; max-width: 600px; background: #2a2a2a; transition: border-color 0.3s; }
    #drop-area.highlight { border-color: #0af; }
    #fileElem { display: none; }
    button { padding: 10px 20px; background: #0af; color: white; border: none; border-radius: 5px; cursor: pointer; }
    #links { margin-top: 20px; text-align: left; max-width: 600px; margin-left: auto; margin-right: auto; }
    a { color: #0cf; word-wrap: break-word; }
    .copy-btn { margin-left: 10px; background: #444; color: #fff; border: none; padding: 5px 10px; cursor: pointer; border-radius: 5px; }
  </style>
</head>
<body>
  <h1>Adonix Files</h1>
  <p>Arrastra archivos aquí o <button onclick="document.getElementById('fileElem').click()">Selecciona</button></p>
  <input type="file" id="fileElem" multiple>
  <div id="drop-area">Suelta tus archivos aquí</div>
  <div id="links"></div>

  <script>
    const dropArea = document.getElementById("drop-area")
    const fileInput = document.getElementById("fileElem")
    const linksDiv = document.getElementById("links")

    ;['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
      dropArea.addEventListener(eventName, preventDefaults, false)
    })

    function preventDefaults(e) { e.preventDefault(); e.stopPropagation() }

    ;['dragenter', 'dragover'].forEach(eventName => {
      dropArea.addEventListener(eventName, () => dropArea.classList.add('highlight'), false)
    })

    ;['dragleave', 'drop'].forEach(eventName => {
      dropArea.addEventListener(eventName, () => dropArea.classList.remove('highlight'), false)
    })

    dropArea.addEventListener('drop', handleDrop, false)
    fileInput.addEventListener('change', () => handleFiles(fileInput.files))

    function handleDrop(e) {
      const dt = e.dataTransfer
      handleFiles(dt.files)
    }

    async function handleFiles(files) {
      const formData = new FormData()
      for (let file of files) formData.append('files', file)

      const res = await fetch('/upload', { method: 'POST', body: formData })
      const data = await res.json()
      linksDiv.innerHTML = data.files.map(url =>
        `<p><a href="${url}" target="_blank">${url}</a>
        <button class="copy-btn" onclick="navigator.clipboard.writeText('${url}')">Copiar</button></p>`
      ).join('')
    }
  </script>
</body>
</html>
